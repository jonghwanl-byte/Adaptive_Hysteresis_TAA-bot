# Adaptive-Hysteresis-TAA (Sharpe 1.74 - Real MA)

이 저장소는 2005년 9월부터 2024년 12월까지의 데이터를 기반으로 백테스트된 전술적 자산 배분(TAA) 전략을 매일 실행하고 텔레그램으로 알림을 전송합니다.

이 전략은 휩쏘(Whipsaw)를 방지하는 **`+/- 3%` 이격도 밴드(Hysteresis)**와, 금리 추세에 **적응(Adaptive)**하는 채권 스위칭을 결합합니다.

**[핵심 수정]** 이 전략은 '가상' 자산의 MA를 추종하는 대신, **'실물 자산'(QQQ, GLD, IEF, TLT)의 실제 MA**를 직접 추종하여 투명성과 검증 가능성을 높였습니다.

---

## 🏆 포트폴리오 성과 (2005-09-06 ~ 2024-12-31)

| 지표 | 성과 |
| :--- | :--- |
| **샤프 지수 (Sharpe Ratio)** | **1.7386** |
| **연평균 수익률 (CAGR)** | **13.70%** |
| **최대 낙폭 (MDD)** | **-6.89%** |
| **연평균 변동성 (Volatility)** | 7.88% |

---

## ⚙️ 전략 핵심 룰

### 1. 기본 자산 비중 (Base Weights)
이 전략은 다음의 고정된 기본 비중을 전제로 합니다. (샤프 1.74 최적 비중)

* **QQQ:** 47.93%
* **GLD:** 25.68%
* **Tactical_Bond:** 26.39%

### 2. 'Tactical_Bond' 스위칭 룰 (금리 대응)
`Tactical_Bond`는 금리 추세에 따라 "오늘 투자할 대표 선수"를 결정합니다.

* **기준 지표:** 미국 10년물 국채 금리 (`^TNX`) 200일 이동평균선(MA)
* **룰:**
    * **금리 상승기 (`^TNX` > 200MA):** `Tactical_Bond`의 대표 선수는 **`IEF`** (7-10년 중기채)가 됩니다.
    * **금리 하락기 (`^TNX` < 200MA):** `Tactical_Bond`의 대표 선수는 **`TLT`** (20년+ 초장기채)가 됩니다.

### 3. '이격도 밴드' 룰 (휩쏘 방지)
횡보장에서의 잦은 매매를 방지하기 위해 **`+/- 3%`**의 "데드 존(Dead Zone)"을 설정합니다.

* **매수(ON) 신호:** 가격이 MA선보다 **+3% 위로** 올라갈 때만 ON
* **매도(OFF) 신호:** 가격이 MA선보다 **-3% 아래로** 내려갈 때만 OFF
* **횡보장 (Dead Zone):** 가격이 **MA선 `+/- 3%` 사이**에 있다면, **"기존 신호(ON 또는 OFF)를 그대로 유지"**합니다.

### 4. 'MA 가중치' 룰 (실물 자산 기준)
각 자산의 "실제 투자 비중"을 결정합니다.

* **기준 MA:** `20일`, `120일`, `200일`
* **룰 (시나리오 A):**
    * **3개 ON:** 기본 비중의 **100%** 투자
    * **2개 ON:** 기본 비중의 **75%** 투자
    * **1개 ON:** 기본 비중의 **50%** 투자
    * **0개 ON:** 기본 비중의 **0%** 투자 (현금화)

* **[중요] 적용 방식:**
    * **QQQ:** `QQQ`의 실제 가격과 `QQQ`의 20/120/200일 MA 밴드를 비교합니다.
    * **GLD:** `GLD`의 실제 가격과 `GLD`의 20/120/200일 MA 밴드를 비교합니다.
    * **Tactical_Bond:** (룰 #2에서 정해진) **`IEF`** 또는 **`TLT`**의 실제 가격과 **그 자산의** 20/120/200일 MA 밴드를 비교합니다.

### 5. '현금' 룰
투자되지 않고 남은 모든 비중은 **수익률 0%의 현금**으로 보유합니다.

---

## 🚀 자동화 (GitHub Actions)

이 저장소는 GitHub Actions를 통해 매일 오전 8시(KST)에 자동으로 실행되도록 설정되어 있습니다.

1.  **실행 시간:** 매주 월~금요일 오전 8:00 (KST)
2.  **알림:** 실행 완료 시 `daily_signal_generator.py`의 결과가 텔레그램으로 전송됩니다.

### 텔레그램 설정 (필수)
이 기능이 작동하려면, GitHub 저장소에 텔레그램 'Secrets'를 등록해야 합니다.

1.  저장소(Repository) > `Settings` > `Secrets and variables` > `Actions`로 이동합니다.
2.  `New repository secret` 버튼을 클릭하여 아래 2개를 등록합니다.
    * **이름:** `TELEGRAM_TOKEN` (봇 토큰)
    * **이름:** `TELEGRAM_TO` (챗 ID)
